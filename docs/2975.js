"use strict";(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[2975],{90623:(t,i,e)=>{e.r(i),e.d(i,{default:()=>u});var a=e(96540),s=e(6442);const h=e.p+"images/a6f77ec2.png";const n=class{constructor(t){this.init(t)}init(t){this.boxRef=t.boxRef,this.canvas=t.canvas,this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=this.canvas.width,this.height=this.canvas.height,this.max_amplitude=1024,this.amplitude=t.amplitude||512,this.background=t.background,this.load=!1,this.img_data=null,this.new_img_data=null,this.animation_idx=null,this.mousemove_interval=t.mousemove_interval||50,this.animation_interval=t.animation_interval||20,this.ripple_radius=t.ripple_radius||3,this.bridge=new Image,this.bridge.src=h,t.resize&&this.setResize()}drawBackground(){this.background.complete&&(this.ctx.drawImage(this.background,0,0,this.width,this.height),this.img_data=this.ctx.getImageData(0,0,this.width,this.height),this.new_img_data=this.ctx.getImageData(0,0,this.width,this.height),this.buffer_1=new Array(this.width).fill(0).map((()=>new Array(this.height).fill(0))),this.buffer_2=new Array(this.width).fill(0).map((()=>new Array(this.height).fill(0))),this.load=!0)}render(){if(!this.load)return void this.drawBackground();const t=this.width,i=this.height,e=t>>1,a=i>>1,s=this.new_img_data.data.length;for(let h=0;h<s;h+=4){const s=h>>2,n=s%t,r=(s-n)/t,o=Math.max(n-1,0),d=Math.min(n+1,t-1),l=Math.min(r+1,i-1),u=Math.max(r-1,0);let c=this.buffer_1[n][l]+this.buffer_1[n][u]+this.buffer_1[d][r]+this.buffer_1[o][r];c>>=1,c-=this.buffer_2[n][r],c-=c>>5,this.buffer_2[n][r]=c;const m=(this.max_amplitude-c)/this.max_amplitude;if(0!==c){let s=((n-e)*m|0)+e,o=((r-a)*m|0)+a;s=Math.min(s,t-1),s=Math.max(s,0),o=Math.max(o,0),o=Math.min(o,i-1);const d=o*t+s<<2,l=this.img_data.data[d],u=this.img_data.data[d+1],c=this.img_data.data[d+2];this.new_img_data.data[h]=l,this.new_img_data.data[h+1]=u,this.new_img_data.data[h+2]=c}}this.ctx.putImageData(this.new_img_data,0,0),this.ctx.drawImage(this.bridge,0,.35*this.height,this.width,.65*this.height);const h=this.buffer_2;this.buffer_2=this.buffer_1,this.buffer_1=h}animate(){let t=(new Date).getTime();const i=()=>{const e=(new Date).getTime();e-t>this.animation_interval&&(this.render(),t=e),this.animation_idx=requestAnimationFrame(i)};i()}throttle(t,i){let e=(new Date).getTime();return function(){const a=(new Date).getTime();a-e>=i&&(e=a,t.apply(this,arguments))}}ripple(t,i){if(!this.load)return;const e=Math.max(t-this.ripple_radius,0),a=Math.min(t+this.ripple_radius,this.buffer_1.length-1),s=Math.max(i-this.ripple_radius,0),h=Math.min(i+this.ripple_radius,this.buffer_1[0].length-1);for(let t=e;t<a;t++)for(let i=s;i<h;i++)this.buffer_1[t][i]=this.amplitude}addMousemove(){this.canvas.addEventListener("mousemove",this.throttle((t=>{const{top:i,left:e}=this.canvas.getBoundingClientRect();this.ripple(Math.floor(t.clientX-e),Math.floor(t.clientY-i))}),this.mousemove_interval))}setResize(){window.addEventListener("resize",(()=>{const{offsetWidth:t,offsetHeight:i}=this.boxRef.current;this.canvas.width=t,this.canvas.height=i,this.width=this.canvas.width,this.height=this.canvas.height,this.load=!1}))}stop(){cancelAnimationFrame(this.animation_idx)}resume(){this.animate()}},r=e.p+"images/cf5db1b1.png";var o=e(74848);let d=600,l=600;const u=()=>{const t=(0,s.A)(),i=(0,a.useRef)(null),e=(0,a.useRef)(null),h=(0,a.useRef)(null),u=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(i.current&&e.current){const{offsetWidth:t,offsetHeight:a}=i.current;d=t,l=a,e.current.width=d,e.current.height=l;const s=new Image;s.src=r;const o=new n({canvas:e.current,background:s,boxRef:i});h.current=o,o.animate(),u.current=window.setInterval((()=>{const t=Math.floor(d*Math.random()),i=Math.floor(l*Math.random());o.ripple(t,i)}),1e3),o.addMousemove()}return()=>{var t;u.current&&clearInterval(u.current),null===(t=h.current)||void 0===t||t.stop()}}),[]),(0,o.jsx)("div",{style:{boxSizing:"border-box",width:"100%",height:"100%",display:"flex"},ref:i,children:(0,o.jsx)("canvas",{ref:e,children:t.formatMessage({id:"common.browserTooLow"})})})}}}]);