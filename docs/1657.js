"use strict";(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[1657],{81657:(t,e,n)=>{n.d(e,{Qm:()=>v,eZ:()=>N,PE:()=>P,QZ:()=>z,HT:()=>B,hz:()=>f,gL:()=>c,H0:()=>S,yy:()=>q,XA:()=>h,oA:()=>D,z7:()=>G,WG:()=>x,Zc:()=>T,J:()=>R,Sd:()=>u,gR:()=>C,ZE:()=>g,Qn:()=>y,c1:()=>U,iT:()=>_,uv:()=>H,nG:()=>p,hR:()=>I,$S:()=>d,xY:()=>w,z:()=>m,Uh:()=>A,RJ:()=>b,dN:()=>M});var r=n(49527),o=n(42569),l=n.n(o),i=n(3075);const a={toRGBA8:function(t){const e=t.width,n=t.height;if(null===t.tabs.acTL)return[a.toRGBA8.decodeImage(t.data,e,n,t).buffer];const r=[];null===t.frames[0].data&&(t.frames[0].data=t.data);const o=e*n*4,l=new Uint8Array(o),i=new Uint8Array(o),s=new Uint8Array(o);for(let f=0;f<t.frames.length;f++){const c=t.frames[f],h=c.rect.x,u=c.rect.y,d=c.rect.width,g=c.rect.height,w=a.toRGBA8.decodeImage(c.data,d,g,t);if(0!==f)for(let t=0;t<o;t++)s[t]=l[t];if(0===c.blend?a._copyTile(w,d,g,l,e,n,h,u,0):1===c.blend&&a._copyTile(w,d,g,l,e,n,h,u,1),r.push(l.buffer.slice(0)),1===c.dispose)a._copyTile(i,d,g,l,e,n,h,u,0);else if(2===c.dispose)for(let t=0;t<o;t++)l[t]=s[t]}return r}};a.toRGBA8.decodeImage=function(t,e,n,r){const o=e*n,l=a.decode._getBPP(r),i=Math.ceil(e*l/8),s=new Uint8Array(4*o),f=new Uint32Array(s.buffer),c=r.ctype,h=r.depth,u=a._bin.readUshort;if(6===c){const e=o<<2;if(8===h)for(let n=0;n<e;n+=4)s[n]=t[n],s[n+1]=t[n+1],s[n+2]=t[n+2],s[n+3]=t[n+3];if(16===h)for(let n=0;n<e;n++)s[n]=t[n<<1]}else if(2===c){const e=r.tabs.tRNS;if(null===e){if(8===h)for(let e=0;e<o;e++){const n=3*e;f[e]=255<<24|t[n+2]<<16|t[n+1]<<8|t[n]}if(16===h)for(let e=0;e<o;e++){const n=6*e;f[e]=255<<24|t[n+4]<<16|t[n+2]<<8|t[n]}}else{const n=e[0],r=e[1],l=e[2];if(8===h)for(let e=0;e<o;e++){const o=e<<2,i=3*e;f[e]=255<<24|t[i+2]<<16|t[i+1]<<8|t[i],t[i]===n&&t[i+1]===r&&t[i+2]===l&&(s[o+3]=0)}if(16===h)for(let e=0;e<o;e++){const o=e<<2,i=6*e;f[e]=255<<24|t[i+4]<<16|t[i+2]<<8|t[i],u(t,i)===n&&u(t,i+2)===r&&u(t,i+4)===l&&(s[o+3]=0)}}}else if(3===c){const l=r.tabs.PLTE,a=r.tabs.tRNS,f=a?a.length:0;if(1===h)for(let r=0;r<n;r++){const n=r*i,o=r*e;for(let r=0;r<e;r++){const e=o+r<<2,i=t[n+(r>>3)]>>7-(7&r)&1,c=3*i;s[e]=l[c],s[e+1]=l[c+1],s[e+2]=l[c+2],s[e+3]=i<f?a[i]:255}}if(2===h)for(let r=0;r<n;r++){const n=r*i,o=r*e;for(let r=0;r<e;r++){const e=o+r<<2,i=t[n+(r>>2)]>>6-((3&r)<<1)&3,c=3*i;s[e]=l[c],s[e+1]=l[c+1],s[e+2]=l[c+2],s[e+3]=i<f?a[i]:255}}if(4===h)for(let r=0;r<n;r++){const n=r*i,o=r*e;for(let r=0;r<e;r++){const e=o+r<<2,i=t[n+(r>>1)]>>4-((1&r)<<2)&15,c=3*i;s[e]=l[c],s[e+1]=l[c+1],s[e+2]=l[c+2],s[e+3]=i<f?a[i]:255}}if(8===h)for(let e=0;e<o;e++){const n=e<<2,r=t[e],o=3*r;s[n]=l[o],s[n+1]=l[o+1],s[n+2]=l[o+2],s[n+3]=r<f?a[r]:255}}else if(4===c){if(8===h)for(let e=0;e<o;e++){const n=e<<2,r=e<<1,o=t[r];s[n]=o,s[n+1]=o,s[n+2]=o,s[n+3]=t[r+1]}if(16===h)for(let e=0;e<o;e++){const n=e<<2,r=e<<2,o=t[r];s[n]=o,s[n+1]=o,s[n+2]=o,s[n+3]=t[r+2]}}else if(0===c){const o=r.tabs.tRNS?r.tabs.tRNS:-1;for(let r=0;r<n;r++){const n=r*i,l=r*e;if(1===h)for(let r=0;r<e;r++){const e=255*(t[n+(r>>>3)]>>>7-(7&r)&1),i=e===255*o?0:255;f[l+r]=i<<24|e<<16|e<<8|e}else if(2===h)for(let r=0;r<e;r++){const e=85*(t[n+(r>>>2)]>>>6-((3&r)<<1)&3),i=e===85*o?0:255;f[l+r]=i<<24|e<<16|e<<8|e}else if(4===h)for(let r=0;r<e;r++){const e=17*(t[n+(r>>>1)]>>>4-((1&r)<<2)&15),i=e===17*o?0:255;f[l+r]=i<<24|e<<16|e<<8|e}else if(8===h)for(let r=0;r<e;r++){const e=t[n+r],i=e===o?0:255;f[l+r]=i<<24|e<<16|e<<8|e}else if(16===h)for(let r=0;r<e;r++){const e=t[n+(r<<1)],i=u(t,n+(r<<1))===o?0:255;f[l+r]=i<<24|e<<16|e<<8|e}}}return s},a.decode=function(t){const e=new Uint8Array(t);let n=8;const r=a._bin,o=r.readUshort,l=r.readUint,i={tabs:{},frames:[]},s=new Uint8Array(e.length);let f,c=0,h=0;const u=[137,80,78,71,13,10,26,10];for(let t=0;t<8;t++)if(e[t]!==u[t])throw"The input is not a PNG file!";for(;n<e.length;){const t=r.readUint(e,n);n+=4;const u=r.readASCII(e,n,4);if(n+=4,"IHDR"===u)a.decode._IHDR(e,n,i);else if("CgBI"===u)i.tabs[u]=e.slice(n,n+4);else if("IDAT"===u){for(let r=0;r<t;r++)s[c+r]=e[n+r];c+=t}else if("acTL"===u)i.tabs[u]={num_frames:l(e,n),num_plays:l(e,n+4)},f=new Uint8Array(e.length);else if("fcTL"===u){if(0!==h){const t=i.frames[i.frames.length-1];t.data=a.decode._decompress(i,f.slice(0,h),t.rect.width,t.rect.height),h=0}const t={x:l(e,n+12),y:l(e,n+16),width:l(e,n+4),height:l(e,n+8)};let r=o(e,n+22);r=o(e,n+20)/(0===r?100:r);const s={rect:t,delay:Math.round(1e3*r),dispose:e[n+24],blend:e[n+25]};i.frames.push(s)}else if("fdAT"===u){for(let r=0;r<t-4;r++)f[h+r]=e[n+r+4];h+=t-4}else if("pHYs"===u)i.tabs[u]=[r.readUint(e,n),r.readUint(e,n+4),e[n+8]];else if("cHRM"===u){i.tabs[u]=[];for(let t=0;t<8;t++)i.tabs[u].push(r.readUint(e,n+4*t))}else if("tEXt"===u||"zTXt"===u){null===i.tabs[u]&&(i.tabs[u]={});const o=r.nextZero(e,n),l=r.readASCII(e,n,o-n);let s;const f=n+t-o-1;if("tEXt"===u)s=r.readASCII(e,o+1,f);else{const t=a.decode._inflate(e.slice(o+2,o+2+f));s=r.readUTF8(t,0,t.length)}i.tabs[u][l]=s}else if("iTXt"===u){null==i.tabs[u]&&(i.tabs[u]={});let o=0,l=n;o=r.nextZero(e,l);const s=r.readASCII(e,l,o-l);l=o+1;const f=e[l];let c;l+=2,o=r.nextZero(e,l),l=o+1,o=r.nextZero(e,l),l=o+1;const h=t-(l-n);if(0===f)c=r.readUTF8(e,l,h);else{const t=a.decode._inflate(e.slice(l,l+h));c=r.readUTF8(t,0,t.length)}i.tabs[u][s]=c}else if("PLTE"===u)i.tabs[u]=r.readBytes(e,n,t);else if("hIST"===u){const t=i.tabs.PLTE.length/3;i.tabs[u]=[];for(let r=0;r<t;r++)i.tabs[u].push(o(e,n+2*r))}else if("tRNS"===u)3===i.ctype?i.tabs[u]=r.readBytes(e,n,t):0===i.ctype?i.tabs[u]=o(e,n):2===i.ctype&&(i.tabs[u]=[o(e,n),o(e,n+2),o(e,n+4)]);else if("gAMA"===u)i.tabs[u]=r.readUint(e,n)/1e5;else if("sRGB"===u)i.tabs[u]=e[n];else if("bKGD"===u)0===i.ctype||4===i.ctype?i.tabs[u]=[o(e,n)]:2===i.ctype||6===i.ctype?i.tabs[u]=[o(e,n),o(e,n+2),o(e,n+4)]:3===i.ctype&&(i.tabs[u]=e[n]);else if("IEND"===u)break;n+=t,n+=4}if(0!==h){const t=i.frames[i.frames.length-1];t.data=a.decode._decompress(i,f.slice(0,h),t.rect.width,t.rect.height),h=0}return i.data=a.decode._decompress(i,s,i.width,i.height),delete i.compress,delete i.interlace,delete i.filter,i},a.decode._decompress=function(t,e,n,r){const o=a.decode._getBPP(t),l=Math.ceil(n*o/8),i=new Uint8Array((l+1+t.interlace)*r);return e=t.tabs.CgBI?a.inflateRaw(e,i):a.decode._inflate(e,i),0===t.interlace?e=a.decode._filterZero(e,t,0,n,r):1===t.interlace&&(e=a.decode._readInterlace(e,t)),e},a.decode._inflate=function(t,e){return a.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e)},a.inflateRaw=function(){const t={H:{}};return t.H.N=function(e,n){const r=Uint8Array;let o,l,i=0,a=0,s=0,f=0,c=0,h=0,u=0,d=0,g=0;if(3===e[0]&&0===e[1])return n||new r(0);const w=t.H,m=w.b,p=w.e,y=w.R,b=w.n,A=w.A,U=w.Z,M=w.m,I=null===n;for(I&&(n=new r(e.length>>>2<<3));0===i;)if(i=m(e,g,1),a=m(e,g+1,2),g+=3,0!==a){if(I&&(n=t.H.W(n,d+(1<<17))),1===a&&(o=M.J,l=M.h,h=511,u=31),2===a){s=p(e,g,5)+257,f=p(e,g+5,5)+1,c=p(e,g+10,4)+4,g+=14;let t=1;for(let t=0;t<38;t+=2)M.Q[t]=0,M.Q[t+1]=0;for(let n=0;n<c;n++){const r=p(e,g+3*n,3);M.Q[1+(M.X[n]<<1)]=r,r>t&&(t=r)}g+=3*c,b(M.Q,t),A(M.Q,t,M.u),o=M.w,l=M.d,g=y(M.u,(1<<t)-1,s+f,e,g,M.v);const n=w.V(M.v,0,s,M.C);h=(1<<n)-1;const r=w.V(M.v,s,f,M.D);u=(1<<r)-1,b(M.C,n),A(M.C,n,o),b(M.D,r),A(M.D,r,l)}for(;;){const t=o[U(e,g)&h];g+=15&t;const r=t>>>4;if(r>>>8==0)n[d++]=r;else{if(256===r)break;{let t=d+r-254;if(r>264){const n=M.q[r-257];t=d+(n>>>3)+p(e,g,7&n),g+=7&n}const o=l[U(e,g)&u];g+=15&o;const i=o>>>4,a=M.c[i],s=(a>>>4)+m(e,g,15&a);for(g+=15&a;d<t;)n[d]=n[d++-s],n[d]=n[d++-s],n[d]=n[d++-s],n[d]=n[d++-s];d=t}}}}else{7&g&&(g+=8-(7&g));const o=4+(g>>>3),l=e[o-4]|e[o-3]<<8;I&&(n=t.H.W(n,d+l)),n.set(new r(e.buffer,e.byteOffset+o,l),d),g=o+l<<3,d+=l}return n.length===d?n:n.slice(0,d)},t.H.W=function(t,e){const n=t.length;if(e<=n)return t;const r=new Uint8Array(n<<1);return r.set(t,0),r},t.H.R=function(e,n,r,o,l,i){const a=t.H.e,s=t.H.Z;let f=0;for(;f<r;){const t=e[s(o,l)&n];l+=15&t;const r=t>>>4;if(r<=15)i[f]=r,f++;else{let t=0,e=0;16===r?(e=3+a(o,l,2),l+=2,t=i[f-1]):17===r?(e=3+a(o,l,3),l+=3):18===r&&(e=11+a(o,l,7),l+=7);const n=f+e;for(;f<n;)i[f]=t,f++}}return l},t.H.V=function(t,e,n,r){let o=0,l=0;const i=r.length>>>1;for(;l<n;){const n=t[l+e];r[l<<1]=0,r[1+(l<<1)]=n,n>o&&(o=n),l++}for(;l<i;)r[l<<1]=0,r[1+(l<<1)]=0,l++;return o},t.H.n=function(e,n){const r=t.H.m,o=e.length;let l,i,a,s,f;const c=r.j;for(let t=0;t<=n;t++)c[t]=0;for(s=1;s<o;s+=2)c[e[s]]++;const h=r.K;for(l=0,c[0]=0,i=1;i<=n;i++)l=l+c[i-1]<<1,h[i]=l;for(a=0;a<o;a+=2)f=e[a+1],0!==f&&(e[a]=h[f],h[f]++)},t.H.A=function(e,n,r){const o=e.length,l=t.H.m.r;for(let t=0;t<o;t+=2)if(0!==e[t+1]){const o=t>>1,i=e[t+1],a=o<<4|i,s=n-i;let f=e[t]<<s;const c=f+(1<<s);for(;f!==c;){r[l[f]>>>15-n]=a,f++}}},t.H.l=function(e,n){const r=t.H.m.r,o=15-n;for(let t=0;t<e.length;t+=2){const l=e[t]<<n-e[t+1];e[t]=r[l]>>>o}},t.H.M=function(t,e,n){n<<=7&e;const r=e>>>3;t[r]|=n,t[r+1]|=n>>>8},t.H.I=function(t,e,n){n<<=7&e;const r=e>>>3;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},t.H.e=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<n)-1},t.H.b=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<n)-1},t.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},t.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},t.H.m=function(){const t=Uint16Array,e=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}}(),function(){const e=t.H.m;for(let t=0;t<32768;t++){let n=t;n=(2863311530&n)>>>1|(1431655765&n)<<1,n=(3435973836&n)>>>2|(858993459&n)<<2,n=(4042322160&n)>>>4|(252645135&n)<<4,n=(4278255360&n)>>>8|(16711935&n)<<8,e.r[t]=(n>>>16|n<<16)>>>17}function n(t,e,n){for(;0!=e--;)t.push(0,n)}for(let t=0;t<32;t++)e.q[t]=e.S[t]<<3|e.T[t],e.c[t]=e.p[t]<<4|e.z[t];n(e._,144,8),n(e._,112,9),n(e._,24,7),n(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),n(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),n(e.Q,19,0),n(e.C,286,0),n(e.D,30,0),n(e.v,320,0)}(),t.H.N}(),a.decode._readInterlace=function(t,e){const n=e.width,r=e.height,o=a.decode._getBPP(e),l=o>>3,i=Math.ceil(n*o/8),s=new Uint8Array(r*i);let f=0;const c=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],u=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1];let g=0;for(;g<7;){const w=u[g],m=d[g];let p=0,y=0,b=c[g];for(;b<r;)b+=w,y++;let A=h[g];for(;A<n;)A+=m,p++;const U=Math.ceil(p*o/8);a.decode._filterZero(t,e,f,p,y);let M=0,I=c[g];for(;I<r;){let e=h[g],r=f+M*U<<3;for(;e<n;){if(1===o){let n=t[r>>3];n=n>>7-(7&r)&1,s[I*i+(e>>3)]|=n<<7-(7&e)}if(2===o){let n=t[r>>3];n=n>>6-(7&r)&3,s[I*i+(e>>2)]|=n<<6-((3&e)<<1)}if(4===o){let n=t[r>>3];n=n>>4-(7&r)&15,s[I*i+(e>>1)]|=n<<4-((1&e)<<2)}if(o>=8){const n=I*i+e*l;for(let e=0;e<l;e++)s[n+e]=t[(r>>3)+e]}r+=o,e+=m}M++,I+=w}p*y!=0&&(f+=y*(1+U)),g+=1}return s},a.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},a.decode._filterZero=function(t,e,n,r,o){let l=a.decode._getBPP(e);const i=Math.ceil(r*l/8),s=a.decode._paeth;l=Math.ceil(l/8);let f=0,c=1,h=t[n],u=0;if(h>1&&(t[n]=[0,0,1][h-2]),3===h)for(u=l;u<i;u++)t[u+1]=t[u+1]+(t[u+1-l]>>>1)&255;for(let e=0;e<o;e++)if(f=n+e*i,c=f+e+1,h=t[c-1],u=0,0===h)for(;u<i;u++)t[f+u]=t[c+u];else if(1===h){for(;u<l;u++)t[f+u]=t[c+u];for(;u<i;u++)t[f+u]=t[c+u]+t[f+u-l]}else if(2===h)for(;u<i;u++)t[f+u]=t[c+u]+t[f+u-i];else if(3===h){for(;u<l;u++)t[f+u]=t[c+u]+(t[f+u-i]>>>1);for(;u<i;u++)t[f+u]=t[c+u]+(t[f+u-i]+t[f+u-l]>>>1)}else{for(;u<l;u++)t[f+u]=t[c+u]+s(0,t[f+u-i],0);for(;u<i;u++)t[f+u]=t[c+u]+s(t[f+u-l],t[f+u-i],t[f+u-l-i])}return t},a.decode._paeth=function(t,e,n){const r=t+e-n,o=r-t,l=r-e,i=r-n;return o*o<=l*l&&o*o<=i*i?t:l*l<=i*i?e:n},a.decode._IHDR=function(t,e,n){const r=a._bin;n.width=r.readUint(t,e),e+=4,n.height=r.readUint(t,e),e+=4,n.depth=t[e],e++,n.ctype=t[e],e++,n.compress=t[e],e++,n.filter=t[e],e++,n.interlace=t[e],e++},a._bin={nextZero:function(t,e){for(;0!==t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,n){t[e]=n>>8&255,t[e+1]=255&n},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},readASCII:function(t,e,n){let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(t[e+o]);return r},writeASCII:function(t,e,n){for(let r=0;r<n.length;r++)t[e+r]=n.charCodeAt(r)},readBytes:function(t,e,n){const r=[];for(let o=0;o<n;o++)r.push(t[e+o]);return r},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,n){let r,o="";for(let r=0;r<n;r++)o+="%"+a._bin.pad(t[e+r].toString(16));try{r=decodeURIComponent(o)}catch(r){return a._bin.readASCII(t,e,n)}return r}},a._copyTile=function(t,e,n,r,o,l,i,a,s){const f=Math.min(e,o),c=Math.min(n,l);let h=0,u=0;for(let n=0;n<c;n++)for(let l=0;l<f;l++)if(i>=0&&a>=0?(h=n*e+l<<2,u=(a+n)*o+i+l<<2):(h=(-a+n)*e-i+l<<2,u=n*o+l<<2),0===s)r[u]=t[h],r[u+1]=t[h+1],r[u+2]=t[h+2],r[u+3]=t[h+3];else if(1===s){const e=t[h+3]*(1/255),n=t[h]*e,o=t[h+1]*e,l=t[h+2]*e,i=r[u+3]*(1/255),a=r[u]*i,s=r[u+1]*i,f=r[u+2]*i,c=1-e,d=e+i*c,g=0===d?0:1/d;r[u+3]=255*d,r[u+0]=(n+a*c)*g,r[u+1]=(o+s*c)*g,r[u+2]=(l+f*c)*g}else if(2===s){const e=t[h+3],n=t[h],o=t[h+1],l=t[h+2],i=r[u+3],a=r[u],s=r[u+1],f=r[u+2];e===i&&n===a&&o===s&&l===f?(r[u]=0,r[u+1]=0,r[u+2]=0,r[u+3]=0):(r[u]=n,r[u+1]=o,r[u+2]=l,r[u+3]=e)}else if(3===s){const e=t[h+3],n=t[h],o=t[h+1],l=t[h+2],i=r[u+3],a=r[u],s=r[u+1],f=r[u+2];if(e===i&&n===a&&o===s&&l===f)continue;if(e<220&&i>20)return!1}return!0},a.encode=function(t,e,n,r,o,l,i){null===r&&(r=0),null===i&&(i=!1);const s=a.encode.compress(t,e,n,r,[!1,!1,!1,0,i]);return a.encode.compressPNG(s,-1),a.encode._main(s,e,n,o,l)},a.encodeLL=function(t,e,n,r,o,l,i,s){const f={ctype:0+(1===r?0:2)+(0===o?0:4),depth:l,frames:[]},c=(r+o)*l,h=c*e;for(let r=0;r<t.length;r++)f.frames.push({rect:{x:0,y:0,width:e,height:n},img:new Uint8Array(t[r]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(h/8)});a.encode.compressPNG(f,0,!0);return a.encode._main(f,e,n,i,s)},a.encode._main=function(t,e,n,r,o){o||(o={});const l=a.crc.crc,i=a._bin.writeUint,s=a._bin.writeUshort,f=a._bin.writeASCII;let c=8;const h=t.frames.length>1;let u=!1,d=33+(h?20:0);if(null!==o.sRGB&&void 0!==o.sRGB&&(d+=13),null!==o.pHYs&&void 0!==o.pHYs&&(d+=21),3===t.ctype){const e=t.plte.length;for(let n=0;n<e;n++)t.plte[n]>>>24!=255&&(u=!0);d+=8+3*e+4+(u?8+1*e+4:0)}for(let e=0;e<t.frames.length;e++){h&&(d+=38),d+=t.frames[e].cimg.length+12,0!==e&&(d+=4)}d+=12;const g=new Uint8Array(d),w=[137,80,78,71,13,10,26,10];for(let t=0;t<8;t++)g[t]=w[t];if(i(g,c,13),c+=4,f(g,c,"IHDR"),c+=4,i(g,c,e),c+=4,i(g,c,n),c+=4,g[c]=t.depth,c++,g[c]=t.ctype,c++,g[c]=0,c++,g[c]=0,c++,g[c]=0,c++,i(g,c,l(g,c-17,17)),c+=4,null!==o.sRGB&&void 0!==o.sRGB&&(i(g,c,1),c+=4,f(g,c,"sRGB"),c+=4,g[c]=o.sRGB,c++,i(g,c,l(g,c-5,5)),c+=4),null!==o.pHYs&&void 0!==o.pHYs&&(i(g,c,9),c+=4,f(g,c,"pHYs"),c+=4,i(g,c,o.pHYs[0]),c+=4,i(g,c,o.pHYs[1]),c+=4,g[c]=o.pHYs[2],c++,i(g,c,l(g,c-13,13)),c+=4),h&&(i(g,c,8),c+=4,f(g,c,"acTL"),c+=4,i(g,c,t.frames.length),c+=4,i(g,c,null!=o.loop?o.loop:0),c+=4,i(g,c,l(g,c-12,12)),c+=4),3===t.ctype){const e=t.plte.length;i(g,c,3*e),c+=4,f(g,c,"PLTE"),c+=4;for(let n=0;n<e;n++){const e=3*n,r=t.plte[n],o=255&r,l=r>>>8&255,i=r>>>16&255;g[c+e+0]=o,g[c+e+1]=l,g[c+e+2]=i}if(c+=3*e,i(g,c,l(g,c-3*e-4,3*e+4)),c+=4,u){i(g,c,e),c+=4,f(g,c,"tRNS"),c+=4;for(let n=0;n<e;n++)g[c+n]=t.plte[n]>>>24&255;c+=e,i(g,c,l(g,c-e-4,e+4)),c+=4}}let m=0;for(let e=0;e<t.frames.length;e++){const n=t.frames[e];h&&(i(g,c,26),c+=4,f(g,c,"fcTL"),c+=4,i(g,c,m++),c+=4,i(g,c,n.rect.width),c+=4,i(g,c,n.rect.height),c+=4,i(g,c,n.rect.x),c+=4,i(g,c,n.rect.y),c+=4,s(g,c,r[e]),c+=2,s(g,c,1e3),c+=2,g[c]=n.dispose,c++,g[c]=n.blend,c++,i(g,c,l(g,c-30,30)),c+=4);const o=n.cimg,a=o.length;i(g,c,a+(0===e?0:4)),c+=4;const u=c;f(g,c,0===e?"IDAT":"fdAT"),c+=4,0!==e&&(i(g,c,m++),c+=4),g.set(o,c),c+=a,i(g,c,l(g,u,c-u)),c+=4}return i(g,c,0),c+=4,f(g,c,"IEND"),c+=4,i(g,c,l(g,c-4,4)),c+=4,g.buffer},a.encode.compressPNG=function(t,e,n){for(let r=0;r<t.frames.length;r++){const o=t.frames[r],l=o.rect.height,i=new Uint8Array(l*o.bpl+l);o.cimg=a.encode._filterZero(o.img,l,o.bpp,o.bpl,i,e,n)}},a.encode.compress=function(t,e,n,r,o){const l=o[0],i=o[1],s=o[2],f=o[3],c=o[4];let h=6,u=8,d=255;for(let e=0;e<t.length;e++){const n=new Uint8Array(t[e]),r=n.length;for(let t=0;t<r;t+=4)d&=n[t+3]}const g=255!==d,w=a.encode.framize(t,e,n,l,i,s),m={},p=[],y=[];if(0!==r){const t=[];for(let e=0;e<w.length;e++)t.push(w[e].img.buffer);const e=a.encode.concatRGBA(t),n=a.quantize(e,r);let o=0;const l=new Uint8Array(n.abuf);for(let t=0;t<w.length;t++){const e=w[t].img,r=e.length;y.push(new Uint8Array(n.inds.buffer,o>>2,r>>2));for(let t=0;t<r;t+=4)e[t]=l[o+t],e[t+1]=l[o+t+1],e[t+2]=l[o+t+2],e[t+3]=l[o+t+3];o+=r}for(let t=0;t<n.plte.length;t++)p.push(n.plte[t].est.rgba)}else for(let t=0;t<w.length;t++){const e=w[t],n=new Uint32Array(e.img.buffer),r=e.rect.width,o=n.length,l=new Uint8Array(o);y.push(l);for(let t=0;t<o;t++){const e=n[t];if(0!==t&&e===n[t-1])l[t]=l[t-1];else if(t>r&&e===n[t-r])l[t]=l[t-r];else{let n=m[e];if(null===n&&(m[e]=n=p.length,p.push(e),p.length>=300))break;l[t]=n}}}const b=p.length;b<=256&&!1===c&&(u=b<=2?1:b<=4?2:b<=16?4:8,u=Math.max(u,f));for(let t=0;t<w.length;t++){const e=w[t],n=e.rect.width,r=e.rect.height;let o=e.img,l=4*n,i=4;if(b<=256&&!1===c){l=Math.ceil(u*n/8);const e=new Uint8Array(l*r),a=y[t];for(let t=0;t<r;t++){const r=t*l,o=t*n;if(8===u)for(let t=0;t<n;t++)e[r+t]=a[o+t];else if(4===u)for(let t=0;t<n;t++)e[r+(t>>1)]|=a[o+t]<<4-4*(1&t);else if(2===u)for(let t=0;t<n;t++)e[r+(t>>2)]|=a[o+t]<<6-2*(3&t);else if(1===u)for(let t=0;t<n;t++)e[r+(t>>3)]|=a[o+t]<<7-1*(7&t)}o=e,h=3,i=1}else if(!1===g&&1===w.length){const t=new Uint8Array(n*r*3),e=n*r;for(let n=0;n<e;n++){const e=3*n,r=4*n;t[e]=o[r],t[e+1]=o[r+1],t[e+2]=o[r+2]}o=t,h=2,i=3,l=3*n}e.img=o,e.bpl=l,e.bpp=i}return{ctype:h,depth:u,plte:p,frames:w}},a.encode.framize=function(t,e,n,r,o,l){const i=[];for(let s=0;s<t.length;s++){const f=new Uint8Array(t[s]),c=new Uint32Array(f.buffer);let h,u=0,d=0,g=e,w=n,m=r?1:0;if(0!==s){const p=l||r||1===s||0!==i[s-2].dispose?1:2;let y=0,b=1e9;for(let r=0;r<p;r++){const l=new Uint32Array(t[s-1-r]);let i=e,a=n,f=-1,h=-1;for(let t=0;t<n;t++)for(let n=0;n<e;n++){const r=t*e+n;c[r]!==l[r]&&(n<i&&(i=n),n>f&&(f=n),t<a&&(a=t),t>h&&(h=t))}-1===f&&(i=a=f=h=0),o&&(1&~i||i--,1&~a||a--);const m=(f-i+1)*(h-a+1);m<b&&(b=m,y=r,u=i,d=a,g=f-i+1,w=h-a+1)}const A=new Uint8Array(t[s-1-y]);1===y&&(i[s-1].dispose=2),h=new Uint8Array(g*w*4),a._copyTile(A,e,n,h,g,w,-u,-d,0),m=a._copyTile(f,e,n,h,g,w,-u,-d,3)?1:0,1===m?a.encode._prepareDiff(f,e,n,h,{x:u,y:d,width:g,height:w}):a._copyTile(f,e,n,h,g,w,-u,-d,0)}else h=f.slice(0);i.push({rect:{x:u,y:d,width:g,height:w},img:h,blend:m,dispose:0})}if(r)for(let r=0;r<i.length;r++){const l=i[r];if(1===l.blend)continue;const s=l.rect,f=i[r-1].rect,c=Math.min(s.x,f.x),h=Math.min(s.y,f.y),u={x:c,y:h,width:Math.max(s.x+s.width,f.x+f.width)-c,height:Math.max(s.y+s.height,f.y+f.height)-h};i[r-1].dispose=1,r-1!=0&&a.encode._updateFrame(t,e,n,i,r-1,u,o),a.encode._updateFrame(t,e,n,i,r,u,o)}return i},a.encode._updateFrame=function(t,e,n,r,o,l,i){const s=Uint8Array,f=Uint32Array,c=new s(t[o-1]),h=new f(t[o-1]),u=o+1<t.length?new s(t[o+1]):null,d=new s(t[o]),g=new f(d.buffer);let w=e,m=n,p=-1,y=-1;for(let t=0;t<l.height;t++)for(let n=0;n<l.width;n++){const i=l.x+n,a=l.y+t,s=a*e+i,f=g[s];0!==f&&(0!==r[o-1].dispose||h[s]!==f||null!==u&&0===u[4*s+3])&&(i<w&&(w=i),i>p&&(p=i),a<m&&(m=a),a>y&&(y=a))}-1===p&&(w=m=p=y=0),i&&(1&~w||w--,1&~m||m--),l={x:w,y:m,width:p-w+1,height:y-m+1};const b=r[o];b.rect=l,b.blend=1,b.img=new Uint8Array(l.width*l.height*4),0===r[o-1].dispose?(a._copyTile(c,e,n,b.img,l.width,l.height,-l.x,-l.y,0),a.encode._prepareDiff(d,e,n,b.img,l)):a._copyTile(d,e,n,b.img,l.width,l.height,-l.x,-l.y,0)},a.encode._prepareDiff=function(t,e,n,r,o){a._copyTile(t,e,n,r,o.width,o.height,-o.x,-o.y,2)},a.encode._filterZero=function(t,e,n,r,o,s,f){const c=[];let h,u=[0,1,2,3,4];-1!==s?u=[s]:(e*r>5e5||1===n)&&(u=[0]),f&&(h={level:0});const d=o.length>1e7&&null!=l()?l():i.Ay;for(let l=0;l<u.length;l++){for(let i=0;i<e;i++)a.encode._filterLine(o,t,i,r,n,u[l]);c.push(d.deflate(o,h))}let g,w=1e9;for(let t=0;t<c.length;t++)c[t].length<w&&(g=t,w=c[t].length);return c[g]},a.encode._filterLine=function(t,e,n,r,o,l){const i=n*r;let s=i+n;const f=a.decode._paeth;if(t[s]=l,s++,0===l)if(r<500)for(let n=0;n<r;n++)t[s+n]=e[i+n];else t.set(new Uint8Array(e.buffer,i,r),s);else if(1===l){for(let n=0;n<o;n++)t[s+n]=e[i+n];for(let n=o;n<r;n++)t[s+n]=e[i+n]-e[i+n-o]+256&255}else if(0===n){for(let n=0;n<o;n++)t[s+n]=e[i+n];if(2===l)for(let n=o;n<r;n++)t[s+n]=e[i+n];if(3===l)for(let n=o;n<r;n++)t[s+n]=e[i+n]-(e[i+n-o]>>1)+256&255;if(4===l)for(let n=o;n<r;n++)t[s+n]=e[i+n]-f(e[i+n-o],0,0)+256&255}else{if(2===l)for(let n=0;n<r;n++)t[s+n]=e[i+n]+256-e[i+n-r]&255;if(3===l){for(let n=0;n<o;n++)t[s+n]=e[i+n]+256-(e[i+n-r]>>1)&255;for(let n=o;n<r;n++)t[s+n]=e[i+n]+256-(e[i+n-r]+e[i+n-o]>>1)&255}if(4===l){for(let n=0;n<o;n++)t[s+n]=e[i+n]+256-f(0,e[i+n-r],0)&255;for(let n=o;n<r;n++)t[s+n]=e[i+n]+256-f(e[i+n-o],e[i+n-r],e[i+n-o-r])&255}}},a.crc={table:function(){const t=new Uint32Array(256);for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update:function(t,e,n,r){for(let o=0;o<r;o++)t=a.crc.table[255&(t^e[n+o])]^t>>>8;return t},crc:function(t,e,n){return 4294967295^a.crc.update(4294967295,t,e,n)}},a.quantize=function(t,e){const n=new Uint8Array(t),r=n.slice(0),o=new Uint32Array(r.buffer),l=a.quantize.getKDtree(r,e),i=l[0],s=l[1],f=a.quantize.planeDst,c=n,h=o,u=c.length,d=new Uint8Array(n.length>>2);let g;if(n.length<2e7)for(let t=0;t<u;t+=4){const e=c[t]*(1/255),n=c[t+1]*(1/255),r=c[t+2]*(1/255),o=c[t+3]*(1/255);g=a.quantize.getNearest(i,e,n,r,o),d[t>>2]=g.ind,h[t>>2]=g.est.rgba}else for(let t=0;t<u;t+=4){const e=c[t]*(1/255),n=c[t+1]*(1/255),r=c[t+2]*(1/255),o=c[t+3]*(1/255);for(g=i;g.left;)g=f(g.est,e,n,r,o)<=0?g.left:g.right;d[t>>2]=g.ind,h[t>>2]=g.est.rgba}return{abuf:r.buffer,inds:d,plte:s}},a.quantize.getKDtree=function(t,e,n){null===n&&(n=1e-4);const r=new Uint32Array(t.buffer),o={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};o.bst=a.quantize.stats(t,o.i0,o.i1),o.est=a.quantize.estats(o.bst);const l=[o];for(;l.length<e;){let e=0,o=0;for(let t=0;t<l.length;t++)l[t].est.L>e&&(e=l[t].est.L,o=t);if(e<n)break;const i=l[o],s=a.quantize.splitPixels(t,r,i.i0,i.i1,i.est.e,i.est.eMq255);if(i.i0>=s||i.i1<=s){i.est.L=0;continue}const f={i0:i.i0,i1:s,bst:null,est:null,tdst:0,left:null,right:null};f.bst=a.quantize.stats(t,f.i0,f.i1),f.est=a.quantize.estats(f.bst);const c={i0:s,i1:i.i1,bst:null,est:null,tdst:0,left:null,right:null};c.bst={R:[],m:[],N:i.bst.N-f.bst.N};for(let t=0;t<16;t++)c.bst.R[t]=i.bst.R[t]-f.bst.R[t];for(let t=0;t<4;t++)c.bst.m[t]=i.bst.m[t]-f.bst.m[t];c.est=a.quantize.estats(c.bst),i.left=f,i.right=c,l[o]=f,l.push(c)}l.sort((function(t,e){return e.bst.N-t.bst.N}));for(let t=0;t<l.length;t++)l[t].ind=t;return[o,l]},a.quantize.getNearest=function(t,e,n,r,o){if(null==t.left)return t.tdst=a.quantize.dist(t.est.q,e,n,r,o),t;const l=a.quantize.planeDst(t.est,e,n,r,o);let i=t.left,s=t.right;l>0&&(i=t.right,s=t.left);const f=a.quantize.getNearest(i,e,n,r,o);if(f.tdst<=l*l)return f;const c=a.quantize.getNearest(s,e,n,r,o);return c.tdst<f.tdst?c:f},a.quantize.planeDst=function(t,e,n,r,o){const l=t.e;return l[0]*e+l[1]*n+l[2]*r+l[3]*o-t.eMq},a.quantize.dist=function(t,e,n,r,o){const l=e-t[0],i=n-t[1],a=r-t[2],s=o-t[3];return l*l+i*i+a*a+s*s},a.quantize.splitPixels=function(t,e,n,r,o,l){const i=a.quantize.vecDot;for(r-=4;n<r;){for(;i(t,n,o)<=l;)n+=4;for(;i(t,r,o)>l;)r-=4;if(n>=r)break;const a=e[n>>2];e[n>>2]=e[r>>2],e[r>>2]=a,n+=4,r-=4}for(;i(t,n,o)>l;)n-=4;return n+4},a.quantize.vecDot=function(t,e,n){return t[e]*n[0]+t[e+1]*n[1]+t[e+2]*n[2]+t[e+3]*n[3]},a.quantize.stats=function(t,e,n){const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[0,0,0,0],l=n-e>>2;for(let l=e;l<n;l+=4){const e=t[l]*(1/255),n=t[l+1]*(1/255),i=t[l+2]*(1/255),a=t[l+3]*(1/255);o[0]+=e,o[1]+=n,o[2]+=i,o[3]+=a,r[0]+=e*e,r[1]+=e*n,r[2]+=e*i,r[3]+=e*a,r[5]+=n*n,r[6]+=n*i,r[7]+=n*a,r[10]+=i*i,r[11]+=i*a,r[15]+=a*a}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:o,N:l}},a.quantize.estats=function(t){const e=t.R,n=t.m,r=t.N,o=n[0],l=n[1],i=n[2],s=n[3],f=0===r?0:1/r,c=[e[0]-o*o*f,e[1]-o*l*f,e[2]-o*i*f,e[3]-o*s*f,e[4]-l*o*f,e[5]-l*l*f,e[6]-l*i*f,e[7]-l*s*f,e[8]-i*o*f,e[9]-i*l*f,e[10]-i*i*f,e[11]-i*s*f,e[12]-s*o*f,e[13]-s*l*f,e[14]-s*i*f,e[15]-s*s*f],h=c,u=a.M4;let d=[Math.random(),Math.random(),Math.random(),Math.random()],g=0,w=0;if(0!==r)for(let t=0;t<16&&(d=u.multVec(h,d),w=Math.sqrt(u.dot(d,d)),d=u.sml(1/w,d),!(0!==t&&Math.abs(w-g)<1e-9));t++)g=w;const m=[o*f,l*f,i*f,s*f];return{Cov:c,q:m,e:d,L:g,eMq255:u.dot(u.sml(255,m),d),eMq:u.dot(d,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0]))>>>0}},a.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},a.encode.concatRGBA=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].byteLength;const n=new Uint8Array(e);let r=0;for(let e=0;e<t.length;e++){const o=new Uint8Array(t[e]),l=o.length;for(let t=0;t<l;t+=4){let e=o[t],l=o[t+1],i=o[t+2];const a=o[t+3];0===a&&(e=l=i=0),n[r+t]=e,n[r+t+1]=l,n[r+t+2]=i,n[r+t+3]=a}r+=l}return n.buffer};const s=a,f=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=e[4*(t*n+n-r-1)],o[l+1]=e[4*(t*n+n-r-1)+1],o[l+2]=e[4*(t*n+n-r-1)+2],o[l+3]=e[4*(t*n+n-r-1)+3]}return new ImageData(o,n,r)}return null},c=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let l=0;l<n;l++){const i=4*(t*n+l);o[i]=e[4*((r-t-1)*n+l)],o[i+1]=e[4*((r-t-1)*n+l)+1],o[i+2]=e[4*((r-t-1)*n+l)+2],o[i+3]=e[4*((r-t-1)*n+l)+3]}return new ImageData(o,n,r)}return null},h=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<n;t++)for(let l=0;l<r;l++){const i=4*(t*r+l);o[i]=e[4*(l*n+n-t-1)],o[i+1]=e[4*(l*n+n-t-1)+1],o[i+2]=e[4*(l*n+n-t-1)+2],o[i+3]=e[4*(l*n+n-t-1)+3]}return new ImageData(o,r,n)}return null},u=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<n;t++)for(let l=0;l<r;l++){const i=4*(t*r+l);o[i]=e[4*((r-l-1)*n+t)],o[i+1]=e[4*((r-l-1)*n+t)+1],o[i+2]=e[4*((r-l-1)*n+t)+2],o[i+3]=e[4*((r-l-1)*n+t)+3]}return new ImageData(o,r,n)}return null},d=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r),i=(e[l]+e[l+1]+e[l+2])/3;o[l]=i,o[l+1]=i,o[l+2]=i,o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},g=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r),i=(e[l]+e[l+1]+e[l+2])/3>127?255:0;o[l]=i,o[l+1]=i,o[l+2]=i,o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},w=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=255-e[l],o[l+1]=255-e[l+1],o[l+2]=255-e[l+2],o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},m=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=e[l],o[l+1]=0,o[l+2]=0,o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},p=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=0,o[l+1]=e[l+1],o[l+2]=0,o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},y=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=0,o[l+1]=0,o[l+2]=e[l+2],o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},b=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=e[l],o[l+1]=e[l+1],o[l+2]=0,o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},A=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=e[l],o[l+1]=0,o[l+2]=e[l+1],o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},U=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=0,o[l+1]=e[l+1],o[l+2]=e[l+1],o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},M=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r),i=(e[l+1]+e[l+2])/2;o[l]=e[l],o[l+1]=i,o[l+2]=i,o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},I=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r),i=(e[l]+e[l+2])/2;o[l]=i,o[l+1]=e[l+1],o[l+2]=i,o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},_=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r),i=(e[l]+e[l+1])/2;o[l]=i,o[l+1]=i,o[l+2]=e[l+2],o[l+3]=e[l+3]}return new ImageData(o,n,r)}return null},C=t=>{if(t){return L(t,[-1,-1,-1,-1,9,-1,-1,-1,-1])}return null},D=t=>{if(t){return L(t,[-1,-1,-1,-1,8,-1,-1,-1,-1])}return null},H=t=>{if(t){const{data:e,width:n,height:r}=t,o=[];let l,i,a,s,f,c,h,u,d,g,w=0;const m=10,p=5;for(c=1/(Math.sqrt(2*Math.PI)*p),f=-1/(2*p*p),h=0,l=-m;l<=m;l++,h++)s=c*Math.exp(f*l*l),o[h]=s,w+=s;for(h=0,g=o.length;h<g;h++)o[h]/=w;for(i=0;i<r;i++)for(l=0;l<n;l++){for(a=s=f=c=0,w=0,u=-m;u<=m;u++)d=l+u,d>=0&&d<n&&(h=4*(i*n+d),a+=e[h]*o[u+m],s+=e[h+1]*o[u+m],f+=e[h+2]*o[u+m],w+=o[u+m]);h=4*(i*n+l),e[h]=a/w,e[h+1]=s/w,e[h+2]=f/w}for(l=0;l<n;l++)for(i=0;i<r;i++){for(a=s=f=c=0,w=0,u=-m;u<=m;u++)d=i+u,d>=0&&d<r&&(h=4*(d*n+l),a+=e[h]*o[u+m],s+=e[h+1]*o[u+m],f+=e[h+2]*o[u+m],w+=o[u+m]);h=4*(i*n+l),e[h]=a/w,e[h+1]=s/w,e[h+2]=f/w}return t}return null},q=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);o[l]=e[l],o[l+1]=e[l+1],o[l+2]=e[l+2],o[l+3]=255}return new ImageData(o,n,r)}return null},x=t=>{if(t){const{data:e,width:n,height:r}=t,o=new Uint8ClampedArray(e.length);for(let t=0;t<r;t++)for(let r=0;r<n;r++){const l=4*(t*n+r);if(0===e[l+3])o[l]=255,o[l+1]=255,o[l+2]=255,o[l+3]=255;else{const t=Z([e[l],e[l+1],e[l+2],e[l+3]],[255,255,255,255]);o[l]=t[0],o[l+1]=t[1],o[l+2]=t[2],o[l+3]=t[3]}}return new ImageData(o,n,r)}return null},R=function(t,e,n,r,o){let l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0;if(t){const{data:a,width:s,height:f}=t;let c=o,h=r,u=e,d=n;if(c<0?c=0:c>s&&(c=s),h<0?h=0:h>f&&(h=f),u<1?u=1:u>s&&(u=s),d<1?d=1:d>f&&(d=f),c+u>s&&(u=s-c),h+d>f&&(d=f-h),l){const t=new Uint8ClampedArray(a.length);for(let e=0;e<f;e++)for(let n=0;n<s;n++){const r=4*(e*s+n);n>=c&&n<=c+u&&e>=h&&e<=h+d?(t[r]=a[r],t[r+1]=a[r+1],t[r+2]=a[r+2],t[r+3]=a[r+3]):(t[r]=255,t[r+1]=255,t[r+2]=255,t[r+3]=i&&["JPG","JPEG"].includes(i.toUpperCase())?255:0)}return new ImageData(t,s,f)}{const t=new Uint8ClampedArray(u*d*4);for(let e=h;e<=h+d;e++)for(let n=c;n<=c+u;n++){const r=4*((e-h)*u+n-c),o=4*(e*s+n);t[r]=a[o],t[r+1]=a[o+1],t[r+2]=a[o+2],t[r+3]=a[o+3]}return new ImageData(t,u,d)}}return null},T=(t,e,n,r)=>{if(t){const{data:o,width:l,height:i}=t;let a=e;a>Math.floor(l/2)&&(a=Math.floor(l/2)),a>Math.floor(i/2)&&(a=Math.floor(i/2)),a<0&&(a=0);const s=new Uint8ClampedArray(o.length);for(let t=0;t<i;t++)for(let e=0;e<l;e++){const f=4*(t*l+e);let c=-1;e<a?t<a?c=Math.sqrt(Math.pow(a-e-1,2)+Math.pow(a-t-1,2)):t>i-a-1&&(c=Math.sqrt(Math.pow(a-e-1,2)+Math.pow(t-(i-a),2))):e>l-a-1&&(t<a?c=Math.sqrt(Math.pow(e-(l-a),2)+Math.pow(a-t-1,2)):t>i-a-1&&(c=Math.sqrt(Math.pow(e-(l-a),2)+Math.pow(t-(i-a),2)))),Math.round(c)>a?(s[f]=255,s[f+1]=255,s[f+2]=255,s[f+3]=r||"PNG"===n.toUpperCase()?0:255):(s[f]=o[f],s[f+1]=o[f+1],s[f+2]=o[f+2],s[f+3]=r||"PNG"===n.toUpperCase()?o[f+3]:255)}return new ImageData(s,l,i)}return null},z=function(t,e,n,o,l){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e4;if(t){const a=new Image;let s=null;if(s="string"==typeof t?t:(0,r.sv)(t),s){a.src=s;const t=document.createElement("canvas"),r=t.getContext("2d");t.width=i,t.height=i,r.drawImage(a,0,0,e,n,0,0,o,l);return r.getImageData(0,0,o,l)}}return null},N=(t,e)=>{if(t){const{data:n,width:r,height:o}=t,l=new Uint8ClampedArray(n.length);for(let t=0;t<o;t++)for(let o=0;o<r;o++){const i=4*(t*r+o);l[i]=Math.max(Math.min(n[i]+e,255),0),l[i+1]=Math.max(Math.min(n[i+1]+e,255),0),l[i+2]=Math.max(Math.min(n[i+2]+e,255),0),l[i+3]=n[i+3]}return new ImageData(l,r,o)}return null},P=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){const{data:r,width:o,height:l}=t,i=new Uint8ClampedArray(r.length);for(let t=0;t<l;t++)for(let l=0;l<o;l++){const a=4*(t*o+l);0===r[a+3]?(i[a]=255,i[a+1]=255,i[a+2]=255):(i[a]=r[a],i[a+1]=r[a+1],i[a+2]=r[a+2]);let s=r[a+3];s=n?Math.max(Math.min(Math.floor(255*e),255),0):Math.max(Math.min(Math.floor(s+255*e),255),0),i[a+3]=s}return new ImageData(i,o,l)}return null},v=(t,e,n,r)=>{if(t&&e){const{data:o,width:l,height:i}=t,{data:a,width:s,height:f}=e;let c=n,h=r;n+f>i&&(c=i-f),r+s>l&&(h=l-s);const u=new Uint8ClampedArray(o.length);for(let t=0;t<i;t++)for(let e=0;e<l;e++){const n=4*(t*l+e);if(e<h||e>h+s||t<=c||t>=c+f)u[n]=o[n],u[n+1]=o[n+1],u[n+2]=o[n+2],u[n+3]=o[n+3];else{const r=4*(t*l+e-((c+1)*l+(t-(c+1))*(l-s))+s-h-1),i=[a[r],a[r+1],a[r+2],a[r+3]],f=[o[n],o[n+1],o[n+2],o[n+3]],d=Z(i,f);u[n]=d[0],u[n+1]=d[1],u[n+2]=d[2],u[n+3]=d[3]}}return new ImageData(u,l,i)}return null},G=function(t,e,n,r,o){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10;if(t){const{data:i,width:a,height:s}=t;let f=o,c=r,h=e,u=n;f<0?f=0:f>a&&(f=a),c<0?c=0:c>s&&(c=s),h<1?h=1:h>a&&(h=a),u<1?u=1:u>s&&(u=s),f+h>a&&(h=a-f),c+u>s&&(u=s-c);const d=new Uint8ClampedArray(i.length);for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=4*(t*a+e);if(e>=f&&e<=f+h&&t>=c&&t<=c+u){const r=Math.floor((e-f)/l),o=Math.floor((t-c)/l);let h=Math.floor(l*(r+1)-l/2+f),u=Math.floor(l*(o+1)-l/2+c);h>a-1&&(h=a-1),u>s-1&&(u=s-1);const g=4*(u*a+h);d[n]=i[g],d[n+1]=i[g+1],d[n+2]=i[g+2],d[n+3]=i[g+3]}else d[n]=i[n],d[n+1]=i[n+1],d[n+2]=i[n+2],d[n+3]=i[n+3]}return new ImageData(d,a,s)}return null},B=async(t,e,n,r,o,l)=>{if(t&&r){const i=o/100;if(["JPG","JPEG"].includes(r.toUpperCase())){const o=new Image;o.src=t;const a=document.createElement("canvas"),s=a.getContext("2d");a.width=e,a.height=n,s.drawImage(o,0,0,e,n),a.toBlob((t=>{l&&l(t)}),"image/".concat(r.toLowerCase()),i)}else{const r=Math.floor(256*i),o=s.encode([t.data.buffer],e,n,r),a=new Blob([o]);l&&l(a)}}else l&&l(null)},S=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{backgroundColor:{r:0,g:0,b:0,a:255},changeIntoColor:{r:0,g:0,b:0,a:0}};if(t){if(e&&n){const{data:r,width:o,height:l}=t,{data:i}=e,a=new Uint8ClampedArray(r.length),{backgroundColor:s,changeIntoColor:f}=n;for(let t=0;t<l;t++)for(let e=0;e<o;e++){const n=4*(t*o+e),l=i[n],c=i[n+1],h=i[n+2],u=i[n+3];l===s.r&&c===s.g&&h===s.b&&u===s.a&&0!==f.a?(a[n]=f.r,a[n+1]=f.g,a[n+2]=f.b,a[n+3]=f.a):(a[n]=r[n],a[n+1]=r[n+1],a[n+2]=r[n+2],a[n+3]=r[n+3])}return new ImageData(a,o,l)}return t}return null},L=(t,e)=>{if(t){const{data:n,width:r,height:o}=t,l=new Uint8ClampedArray(n.length);for(let t=0;t<o;t++)for(let i=0;i<r;i++){const a=4*(t*r+i);for(let s=0;s<3;s++){const f=a+s;l[f]=0===i||i===r-1||0===t||t===o-1?n[f]:e[0]*n[f-4*r-4]+e[1]*n[f-4*r]+e[2]*n[f-4*r+4]+e[3]*n[f-4]+e[4]*n[f]+e[5]*n[f+4]+e[6]*n[f+4*r-4]+e[7]*n[f+4*r]+e[8]*n[f+4*r+4]}l[a+3]=n[a+3]}return new ImageData(l,r,o)}return null},Z=(t,e)=>{if(t&&4===t.length&&e&&4===e.length){const n=t[3],r=e[3];if(255===n||0===r)return t;if(0===n)return e;{const o=n/255,l=r/255;return[Math.max(Math.min(Math.floor(t[0]*o+e[0]*l*(1-o)),255),0),Math.max(Math.min(Math.floor(t[1]*o+e[1]*l*(1-o)),255),0),Math.max(Math.min(Math.floor(t[2]*o+e[2]*l*(1-o)),255),0),Math.max(Math.min(Math.floor(255*(o+l*(1-o))),255),0)]}}return[255,255,255,255]}}}]);