"use strict";(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[6519],{6519:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var n=t(96540),r=t(6442),o=t(89740),i=t(7142),c=t(39437),s=t(53912),l=t(17024),f=t(64236),h=t(46935),u=t(9169);const d="ThrowDice_container__YcvTG",p="ThrowDice_btn__BTDQF",w="ThrowDice_btn_inner__DObIm",m="ThrowDice_numBox__VnUMU";var y=t(74848);const M=10,P=0,b=40,I=120,v=()=>{const e=(0,r.A)(),{menuWidth:a}=(0,h.S)(),t=(0,n.useRef)(null),v=(0,n.useRef)(null),_=(0,n.useRef)([]),g=(0,n.useRef)(null),[R,S]=(0,n.useState)(1),j=(0,n.useRef)(1),k=(0,n.useRef)(!1),x=e=>{const a=document.createElement("canvas"),t=500;a.width=t,a.height=t;const n=a.getContext("2d");switch(n.fillStyle="#eeeeee",n.fillRect(0,0,t,t),e){case 1:n.fillStyle="#d30704",n.arc(250,250,100,0,2*Math.PI),n.fill();break;case 2:n.fillStyle="#153f87",n.arc(250,1500/11,60,0,2*Math.PI),n.arc(250,4e3/11,60,0,2*Math.PI),n.fill();break;case 3:n.fillStyle="#153f87",n.arc(4e3/11,1500/11,60,0,2*Math.PI),n.arc(250,250,60,0,2*Math.PI),n.arc(1500/11,4e3/11,60,0,2*Math.PI),n.fill();break;case 4:n.fillStyle="#d30704",n.beginPath(),n.arc(1500/11,1500/11,60,0,2*Math.PI),n.arc(4e3/11,1500/11,60,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(1500/11,4e3/11,60,0,2*Math.PI),n.arc(4e3/11,4e3/11,60,0,2*Math.PI),n.fill();break;case 5:n.fillStyle="#153f87",n.beginPath(),n.arc(1500/11,1500/11,60,0,2*Math.PI),n.arc(4e3/11,1500/11,60,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(1500/11,4e3/11,60,0,2*Math.PI),n.arc(4e3/11,4e3/11,60,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(250,250,60,0,2*Math.PI),n.fill();break;case 6:n.fillStyle="#153f87",n.beginPath(),n.arc(150,1500/11,50,0,2*Math.PI),n.arc(350,1500/11,50,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(150,250,50,0,2*Math.PI),n.arc(350,250,50,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(150,4e3/11,50,0,2*Math.PI),n.arc(350,4e3/11,50,0,2*Math.PI),n.fill()}return a},B=(0,n.useRef)(new s.j(M,M,M,1,1.4)),q=(0,n.useRef)([new c._4j({map:new c.GOR(x(1)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(6)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(3)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(4)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(5)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(2)),color:"#ffffff"})]),D=()=>{k.current||(j.current?(k.current=!0,_.current.forEach(((e,a)=>{if(a<=j.current-1){let t=10,n=24,r=-Math.floor(a/2)*M*1.5;(a+1)%2==0&&(t+=15),e.body.position=new f.eB(t,n,r),e.mesh.position.copy(e.body.position),e.mesh.rotation.set(1*Math.PI*Math.random(),0,2*Math.PI*Math.random()),e.body.quaternion.copy(e.mesh.quaternion);const o=2+5*Math.random();e.body.applyImpulse(new f.eB(-16,o,-5))}else e.body.position=new f.eB(0,-55,1e3+M*a),e.mesh.position.copy(e.body.position),e.mesh.rotation.set(0,0,0),e.body.quaternion.copy(e.mesh.quaternion)})),setTimeout((()=>{k.current=!1}),2e3)):o.Ay.warning(e.formatMessage({id:"page.threeJs3D.enterDiceNum"})))},{resize:T}=(0,u.A)(t,((e,a,n)=>{if(t.current){e.background=new c.Q1f("#224141"),a.position.set(P,b,I),a.lookAt(0,0,0),n.setClearColor("#224141");const t=new c.$p8(16777215,.5);e.add(t);const r=new c.HiM(16777215,1);r.position.set(100,200,-10),r.castShadow=!0,r.shadow.camera.near=5,r.shadow.camera.far=400,e.add(r);const o=new l.N(a,n.domElement);o.enableRotate=!1,o.maxDistance=1e3,v.current=o,g.current=new f.HK({allowSleep:!0,gravity:new f.eB(0,-420,0)}),g.current.defaultContactMaterial.restitution=.36,(e=>{var a;const t=new c.eaF(new c.bdM(300,300),new c.q2({opacity:.1}));t.receiveShadow=!0,t.position.y=-60,t.quaternion.setFromAxisAngle(new c.Pq0(-1,0,0),.5*Math.PI),e.add(t);const n=new f.nB({type:f.nB.STATIC,shape:new f.Zc});n.position.copy(t.position),n.quaternion.copy(t.quaternion),null===(a=g.current)||void 0===a||a.addBody(n)})(e),(e=>{for(let t=0;t<10;t++){var a;const t=new c.eaF(B.current,q.current);t.castShadow=!0,e.add(t);const n=new f.nB({mass:1,shape:new f.az(new f.eB(5,5,5)),sleepTimeLimit:.1});null===(a=g.current)||void 0===a||a.addBody(n),_.current.push({mesh:t,body:n})}})(e),D()}}),null,(()=>{var e,a;null===(e=g.current)||void 0===e||e.fixedStep();for(let e of _.current)e.mesh.position.copy(e.body.position),e.mesh.quaternion.copy(e.body.quaternion);v.current&&(null===(a=v.current)||void 0===a||a.update())}));return(0,n.useLayoutEffect)((()=>{T()}),[a]),(0,n.useEffect)((()=>()=>{var e,a;null===(e=B.current)||void 0===e||e.dispose(),null===(a=q.current)||void 0===a||a.forEach((e=>{e.dispose()}))}),[]),(0,y.jsxs)("div",{className:d,ref:t,children:[(0,y.jsx)("div",{className:p,children:(0,y.jsx)("div",{className:w,onClick:D,children:"Start"})}),(0,y.jsxs)("div",{className:m,children:[(0,y.jsxs)("span",{children:[e.formatMessage({id:"page.threeJs3D.diceNum"}),"ï¼š"]}),(0,y.jsx)(i.A,{min:1,max:10,precision:0,size:"large",value:R,onChange:e=>{j.current=e,S(e)}})]})]})}}}]);